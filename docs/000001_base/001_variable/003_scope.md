
# スコープ

## サンプルコード

### サンプル1

グローバルスコープとなる下記の２つの定数を宣言してください。

* 定数A = 1
* 定数B = 2

また、関数Dの中に、関数スコープとなる下記の３つの変数を宣言してください。

* 変数dA = "dA"
* 変数dB = "dB"
* 変数dC = A + B

<details><summary><b>回答と解説</b></summary>

#### 回答

```javascript
// グローバルスコープ
const A = 1;
const B = 2;

// 関数スコープ
function D() {
    let dA = "dA";
    let dB = "dB";
    let dC = A + B;
}
```



#### 解説

JavaScriptで定義されるものは、変数、関数などそれぞれが「スコープ」を持っています。

その変数や関数などの「参照できる範囲」を決めるものがスコープになります。

スコープの中で定義されたもの（変数、関数）は、そのスコープ内からしか参照できません。

たとえば、javascriptを書いた際、下記のように定義されたもの（オレンジ＝変数、緑＝関数）があるとします。


![](../assets/001_001_01.png)

#### 関数スコープ

上記の図の場合、functionDは独立した **関数スコープ** として考えます。
関数スコープの中で定義されたものは、そのスコープ内からしか呼び出せません。

#### グローバルスコープ

もっとも外側にあるスコープを **グローバルスコープ**といいます。

今回の図でいうと、一番上にある「A」「B」のボックスは何にも囲まれていない、グローバルスコープ内に定義された **グローバル変数** になります。

定義された変数、関数は、スコープの内側からは呼び出せます。
つまり、functionDからは、変数「A」「B」を呼び出すことが可能です。

</details>



### サンプル2

サンプル1と同じファイル内、関数Dのあとに書かれた、関数Eがあります。

関数Eの中には、下記の内容が記されています。

```javascript
function E() {
    D()
    let a = 1;
    let b;

    if a < 5 {
        let c = 5;
        b = a + c;
    }

    for (let i = 0; i < 10, i ++) {
        let c = 10;
        b = c + i;
    }

    b = c + 1 
}
```
 
この時、関数Eの下から三行に書かれたコードについて答えなさい。
1. ``D() ``は呼び出せるか。
2. ``b = dA``の結果が何になるか。
3.  ``b = c + 1`` の結果が何になるか。

<details><summary><b>回答と解説</b></summary>

#### 回答

```javascript
// 関数スコープ
function E() {
    let a = 1;
    let b;

    // ブロックスコープ１
    if a < 5 {
        let c = 5;
        b = a + c;
    }

    // ブロックスコープ２
    for (let i = 0; i < 10, i ++) {
        let c = 10;
        b = c + i;
    }

    D()  // => 呼び出せる
    b = dA      // => ReferenceError: dA is not defined
    b = c + 1   // => ReferenceError: c is not defined
}
```

#### 解説

* functionD、functionEも同スコープ内（グローバルスコープ）に定義されているため、funcionEの中からfunctionDを参照可能
* ただし、funcionDとfunctionEは異なるスコープになるため、下記のようにfuncionEからfuncionDの内側に定義された「dA」「dB」「dC」を呼び出そうとするとReferenceErrorが発生（参照不可）
* 上記関数E内で定義されたif、forループはそれぞれブロックスコープを持つ
* それぞれのスコープが異なるため、同じ名前の変数cをそれぞれに定義可能
* 変数bは、if、forループのブロックスコープから参照可能
* 変数cは、if、forループの外からは呼び出そうとするとReferenceErrorが発生（参照不可）

#### 関数スコープ

functionDから、funcionEの中に定義された「eA」「eB」「eC」は、参照できません。
反対にfunctionEからも、functionDの中に定義されたものは参照できません。

functionD、Eの外側から、それぞれの内側に定義されたものを呼び出そうとする限り、JavaScriptでは「ReferenceError」が発生します。

しかし、funcionDからfunctionEそのものは呼び出すことが可能です。
functionDとfuncionE自体は同スコープ内に並列に定義されています。
「functionそのもの」であれば、同スコープ内で並列に定義された他のfunctionからは参照することができます。
（各functionの内側で独自に定義されたものについては、前述の通り呼び出すことはできません。）


#### ブロックスコープ

JavaScriptで書かれたコードの中で、``{``と``}``で囲んだ範囲を **ブロック** といいます。
たとえばif文やforループなどは、``{``と``}``を使用して範囲を確定する一つのブロックです。

ブロックも１つのスコープを作成します。

それぞれのブロックの中で宣言した変数は、そのブロックの外側からは参照できません。

</details>


## 問題

### 問題1


関数``multiple3``は引数``n``に3を掛けた数に対し、``10``を足してを返す関数です。
下記条件を満たすコードを書いてください。

* グローバルスコープ内に、定数として``10``を宣言する
* 関数``multiple3``内に、変数名``three``を使って``3``を宣言する
* 関数``multiple3``は、引数``n``に上記で宣言した変数を掛け、``10``を足した数を返す

funciton名: **multiple3(n)**

#### 例

##### 例1

```
input: n = 3

output: 19
```

##### 例2

```
input: n = "3"

output: 19
```

##### 例3

```
input: n = "hello"

output: NaN
```

##### 例4

```
input: n = null

output: 10
```

### 問題2

関数``extra3``は、引数``n``を取り、3を掛け10を足した数に対し、3を書けて返す関数です。
下記の条件を満たす関数extra5を完成させてください。

* 問題1で書いた関数``multiple3``を、関数extra5内で利用する。
* 関数``extra3``内に、変数名``three``を使って``3``を宣言する
* 関数``multiple3``の結果に、変数``three``を掛けた値を返す

funciton名: **extra3(n)**

#### 例

##### 例1

```
input: n = 3

output: 57
```


##### 例2

```
input: n = "3"

output: 57
```

##### 例3

```
input: n = "hello"

output: NaN
```

##### 例4

```
input: n = null

output: 30
```
